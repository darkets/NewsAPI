<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
    <title>Search News</title>
</head>
<body>
<a href="/" class="home-button">Home</a>
<h1>Search News</h1>

<form action="/search" method="GET">
    <label for="topic">Enter Topic:</label>
    <input type="text" id="topic" name="q" required>
    <button type="submit">Search</button>
</form>

<h2>Search by Country</h2>
<div class="flag-buttons">
    <form action="/searchCountry" method="GET">
        <label for="country">Select Country:</label>
        <select id="country" name="country" onchange="this.form.submit()">
            <option value="ae">ğŸ‡¦ğŸ‡ª</option>
            <option value="ar">ğŸ‡¦ğŸ‡·</option>
            <option value="at">ğŸ‡¦ğŸ‡¹</option>
            <option value="au">ğŸ‡¦ğŸ‡º</option>
            <option value="be">ğŸ‡§ğŸ‡ª</option>
            <option value="bg">ğŸ‡§ğŸ‡¬</option>
            <option value="br">ğŸ‡§ğŸ‡·</option>
            <option value="ca">ğŸ‡¨ğŸ‡¦</option>
            <option value="ch">ğŸ‡¨ğŸ‡­</option>
            <option value="cn">ğŸ‡¨ğŸ‡³</option>
            <option value="co">ğŸ‡¨ğŸ‡´</option>
            <option value="cu">ğŸ‡¨ğŸ‡º</option>
            <option value="cz">ğŸ‡¨ğŸ‡¿</option>
            <option value="de">ğŸ‡©ğŸ‡ª</option>
            <option value="eg">ğŸ‡ªğŸ‡¬</option>
            <option value="fr">ğŸ‡«ğŸ‡·</option>
            <option value="gb">ğŸ‡¬ğŸ‡§</option>
            <option value="gr">ğŸ‡¬ğŸ‡·</option>
            <option value="hk">ğŸ‡­ğŸ‡°</option>
            <option value="hu">ğŸ‡­ğŸ‡º</option>
            <option value="id">ğŸ‡®ğŸ‡©</option>
            <option value="in">ğŸ‡®ğŸ‡³</option>
            <option value="it">ğŸ‡®ğŸ‡¹</option>
            <option value="jp">ğŸ‡¯ğŸ‡µ</option>
            <option value="kr">ğŸ‡°ğŸ‡·</option>
            <option value="lt">ğŸ‡±ğŸ‡¹</option>
            <option value="lv">ğŸ‡±ğŸ‡»</option>
            <option value="ma">ğŸ‡²ğŸ‡¦</option>
            <option value="mx">ğŸ‡²ğŸ‡½</option>
            <option value="my">ğŸ‡²ğŸ‡¾</option>
            <option value="ng">ğŸ‡³ğŸ‡¬</option>
            <option value="nl">ğŸ‡³ğŸ‡±</option>
            <option value="no">ğŸ‡³ğŸ‡´</option>
            <option value="nz">ğŸ‡³ğŸ‡¿</option>
            <option value="ph">ğŸ‡µğŸ‡­</option>
            <option value="pl">ğŸ‡µğŸ‡±</option>
            <option value="pt">ğŸ‡µğŸ‡¹</option>
            <option value="ro">ğŸ‡·ğŸ‡´</option>
            <option value="rs">ğŸ‡·ğŸ‡¸</option>
            <option value="ru">ğŸ‡·ğŸ‡º</option>
            <option value="sa">ğŸ‡¸ğŸ‡¦</option>
            <option value="se">ğŸ‡¸ğŸ‡ª</option>
            <option value="sg">ğŸ‡¸ğŸ‡¬</option>
            <option value="si">ğŸ‡¸ğŸ‡®</option>
            <option value="sk">ğŸ‡¸ğŸ‡°</option>
            <option value="th">ğŸ‡¹ğŸ‡­</option>
            <option value="tr">ğŸ‡¹ğŸ‡·</option>
            <option value="tw">ğŸ‡¹ğŸ‡¼</option>
            <option value="ua">ğŸ‡ºğŸ‡¦</option>
            <option value="us">ğŸ‡ºğŸ‡¸</option>
            <option value="ve">ğŸ‡»ğŸ‡ª</option>
            <option value="za">ğŸ‡¿ğŸ‡¦</option>
        </select>
        <noscript><input type="submit" value="Submit"></noscript>
    </form>
</div>

<h3>Search by Time</h3>
<form action="/searchTime" method="GET">
    <label for="start_date">Start Date:</label>
    <input type="date" id="start_date" name="from" required>
    <label for="end_date">End Date:</label>
    <input type="date" id="end_date" name="to" required>
    <label for="topic">Enter Topic:</label>
    <input type="text" id="topic" name="q" required>
    <input type="hidden" name="searchType" value="time">
    <button type="submit">Search</button>
</form>
{% if error is defined %}
    <p>{{ error }}</p>
{% else %}
    {% if news is defined and news.status == 'ok' %}
        <ul>
            {% for article in news.articles %}
                <li>
                    <h2>{{ article.title }}</h2>
                    {% if article.urlToImage is not empty %}
                        <img src="{{ article.urlToImage }}" alt="{{ article.title }} Image">
                    {% else %}
                        <img src="https://t3.ftcdn.net/jpg/04/34/72/82/360_F_434728286_OWQQvAFoXZLdGHlObozsolNeuSxhpr84.jpg" alt="Default Image">
                    {% endif %}
                    <p>{{ article.description }}</p>
                    <a href="{{ article.url }}" target="_blank" rel="noopener noreferrer">Read more</a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No results found.</p>
    {% endif %}
{% endif %}
</body>
</html>


